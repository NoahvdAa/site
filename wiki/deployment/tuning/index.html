<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.20f567a4eeac571197db.css" id="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:initial;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:initial}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:initial}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:initial}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}body{margin:0;font-family:Roboto,sans-serif;line-height:1.6;font-size:16px}code,pre,tt{font-family:Menlo,Consolas,Monaco,Liberation Mono,Lucida Console,monospace}pre{white-space:pre-wrap}body{background:var(--background);color:var(--foreground)}a,a:visited{color:var(--primary)}table{width:100%;padding:1rem;background-color:var(--table-background)}td{text-align:left;padding:.5rem}blockquote{font-style:italic;border-left:8px solid var(--gray);padding-left:1rem;margin-left:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;tab-size:4;-webkit-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 2.31.1"/><title data-react-helmet="true">Tuning Velocity | Velocity</title><meta data-react-helmet="true" name="description" content="Velocity comes with good performance out of the box. We go in deep, starting from smart algorithmic choices, making strategic usage of…"/><meta data-react-helmet="true" property="og:title" content="Tuning Velocity"/><meta data-react-helmet="true" property="og:description" content="Velocity comes with good performance out of the box. We go in deep, starting from smart algorithmic choices, making strategic usage of…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Velocity Contributors"/><meta data-react-helmet="true" name="twitter:title" content="Tuning Velocity"/><meta data-react-helmet="true" name="twitter:description" content="Velocity comes with good performance out of the box. We go in deep, starting from smart algorithmic choices, making strategic usage of…"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><style>
    html {
       --dark-jumbotron-logo-url: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAABCFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Q59ffAAAAV3RSTlMAAQIDBAUICg0RFBcbHSAiIycrLS4yNzs+QURHSk1PUlVXWl1fYmVpbHBzd3p/g4aIjI+Rlpuip6uws7a4u77Bw8bIyszP0tXY293g4+bp7PDz9vj7/f7PGLwTAAAKMklEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYPbuQjF5YIkC8KCFInV3V+ql7rg1EJLz/m9y/Rc2RcKEZHP3e4HKbCBz1hRFUWSSXMs8VtpG9XE/Roq7EquZhzp+0U7CpLhkfOX0oYZO7+OkjFx8+fS+CmuFGCkjrcXJfQXdPAVIGYnYwlG2aKCnY1JcrIWoPU+KcyJzQi16qcRIcUJkeuf6Xcfg7klxsxaifVLYhIVaDE6fJYWvFgyKUVKGr0ULbG5IsSvEUAvRFik2a9GEE7Q0KQOZ2LkSasHpI0xK38ZOCuCg3x2uLO9nm7BwTkq/1qrgYNzE6d9i5wYExjIp/Tk0wEHfoF+WmhDUE6T0Yxc8tukPKwYEz0FSeptogoGQWN3YTOKVZ7BopegvScNWEq+sgMc5dXixk8QrwTxYNGLU4dxOEq/sgcchdTqykcQrYzWwKEWo0zGstKZJ6SIDHuskuIWl4hgpP0o0weKNBIHS4Em8cgMW5jwJlvGTTVJ+MNUGiyyJ3vET7fDEB/ZXYsTuESz0CRJs4GfFNvxAv58iXkvgcUGCcBFdvMIf2ofEKZgDi+84CQ7RjZGDT5wQox3HekKK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);
       --dark-navbar-logo-url: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIkAAAA8CAMAAABl/Wk9AAABCFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Q59ffAAAAV3RSTlMAAQIEBwkMDxMVGBocHSAiIyYpLTM4PD5AREpNUFVZXF5hZmpvc3Z3eXt+gYSIi5CTlpqeoqapqqyusbS4u72/w8XJzM/U19nc3d/h4+bq7fDy8/X5/P6zny1qAAADcklEQVR42sXY84LzQAAE8Dnbtm2rtpnsvP+bfM0W32F3i/R6v3+LTDQLtGh269qXK3sW8Jdmtq58eVYV/irKxMbFR46fxYf/PETdQ+9D6OyiNxYuPOoQeU+UUmkOvXAsqPY2DGxZdEQG8fuWBdXSQ6i4o3SLX9cXosYOHNuUxCZ+2zY1Iv1wnLIqP43fNZiixmr18wRrQk8v7j1fTEDjhBrvkA7Z4Gc35DRRRgtUs+fhGMmzQYTZDVdQuqXGLaRrfpLLsQueoDJnUa04Dsf0188jgu4dQeWdGseQnil181EJDEFhhRqZITiWBL+yozQoP5yeNHG0NgCFvjA1tiEF+F22QK3CPDq1Q41QHxxbqo+odYpODaapsQzHQJwKfuqso1On1HiDdEgVK65/yjs0VqCaNVcvNaV0mWr5GXTmjho39VLTCFCjeHuwr7IzC2l2e6UPP81bVMuO1ktNJ8g22YeoOLRJ32DrpZZfgvRErXKGbbKmgFlb/YKtUkXErschzQjqBdiujfpE6APf9If5jYg/Ha2OoO6QBnG2axFYouPOWGoi8SxDfHZJgwjb9AGg74NkYRpfDaVZk3g+XhvBT3s0CH4ZirzNvB0OyKY8fL2ZVpda4VqGUBovUStlsyGzCDfGivL1X4DBCbXCXal46Ub18EhDk4Oo6ve18pTYg3AlS8cZvhheOXqKC1rv85DGc9S86fxkDK6U6fCgbnj58DEmWFNcgrQmWmjYK7jioUMc9VdDRG1+kRuHdEWFcpafifuVmQ4NAli0KKW8MsQP3n44BoKGfnXPfhwGjml2Cmkqz+9yZXbPrew7I3sZ0oYwXBL3sgDGsjTKjKonMUmbXZRCxYpNo48+OAYj+lJz77w2xJkdQpotakrNvfT5ABwDfhpZiz/3V0ScLXqYG0DLJvM0SoxAeuxg2viMtmwKmognSMMpTakZrKE9NzTbg3TU/hu8gvYMhmlUnodju/1Su0Wb5oo0ig6h4r79xYU4GUR7dmj2MYK+PUEpYbMNVir5TejMmO6BZuVAqnul9giD4RgNul1qYzBYKLMlIkH35mFywJYE6F5qAEavbEEpR9fSizAbSbEpa2/NtcVBNLNk0Sj7fjqN3jihTj54tTGO3un38KdC8GZ3Hr02ltWE6L1Vi1U5z+XmJP7Ssr+UrYSYQm/9A8Yh0fHa1QbcAAAAAElFTkSuQmCC);
       --light-jumbotron-logo-url: url(data:image/png;base64,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);
       --light-navbar-logo-url: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIkAAAA8CAMAAABl/Wk9AAABAlBMVEUAAAAApcwAqM4Apc4Ap88Apc4Apc4AqM0Aps0Ap84Apc0ApswApc4Aps0Ap80Aps4Ap80Aps0Ap84Aps0Aps4Aps0EqdAHrNMKrtQNsdcRtNoVttwWtt0buuAbuuAbuuAauuAbuuEauuAbu+AbuuAbuuEbu+AbuuEau+AbuuAbuuEau+EauuAbuuAbueAbuuAau+EbuuAauuAauuAbuuEauuEau+AbuuAau+Ebu+AWtt0bvOAau+EZuOEYt94cvOEUtt8YudsVsdYAn90A//8CqM8Ap84Bp84Aps0Ap80Aps0Aps0Aps0auuAauuAbuuAbuuAauuAauuAbuuAAps0buuCTPBtaAAAAVHRSTlMAIhwzOj5ESk1aZnB3f4iTnKWqrrW7xMDCxdDa3+Dc2tbMxcC8uLOvp6KflpCHgXl1b15ZVE5EQDovKSQhHRcRDAgFAgHL1Nne5e30/Pj08e3q5vwu6+LEAAADTUlEQVR42sXXhXLDPAzAcY2ZGcrMzAzjYhK9/6N8YA8zW62Xwu9gvOp6yt8JTKmSjXnHA18Jlqn63xAj5IbLGqWWi/vH+J2jufwh3oUXPYSGMmlYjFLcN0aRkc+JzKACi5DUUSzQBMj22aeuNsxfUTaIjS1qBJkozF3XRS9HBrkczFsGJVwd9vMEcqMazFfLhhIF9vO2Hd+5T05n4GAVJJIoEQAmhZ+ujFl4lYxSH6KYXmY/b4y+fevBmIVDEIqiRFTw8/GrMQMnIFLuo9iwzg/Cnz+/7RnW7YFIACWSwASRm+GqXLZAoIASthaPHprojwbh7Xh/kr3NtlrUMsC40UwjVuW1DH+Vlkaty36exd9uDKn9OUStyKPmQBN6VbbgrxIToybSf5rle0JHrV/5iJrQ/ZtsT1bgbyJTRU1lVd6OdoV23kdc2dnoqkRNa3xETebSUNRjNdvrGcaFoCZ+FBsVP6ImNXhRHmUVYKVnWiYyarozVgemioRrQ9U2wA775BxMOr+j5gimCk34kELCnaFqDWCdfXJER80eTLIhvokh4dZQwt+J7jm/voRR40PkG3R/6ZXtPV5McrbXZqXcOz1aEUdtGONDiNQHKHXPdo97WQPOStSGJeUCcw+zSPz3aEXgt2atBVzHO82W9NpgCX8ATpiGKKaCDh37/jIwdQ2F9B8HTx0s4Tvg+z5EyKnjuyFvWzevTxH7Q7DEh0yyYx6C0+rAxKYJ7PHGyh+1AKDUR8bm5UOYefnjX9tN3J9Y1ztpAiSRlgCmNkKz8ZsxO0cAXT+S9CIwOSpq1r3wC4NkawATIaJm3TM7i3Uk+bt8VVzyqFl38H5h0FLAVIaSqFn3fNDmDfUgqV8CJiOJGu14pQNTq42QZG8CE5JEjXIKXVCQQ1oQmKZN/a5xU/kgpKWBSapHbQPUtF1IGpT5pqhH7QgUVYZIcrZ4U5Sj1ttvgZo00vxN6KZ1ZO6UotZ7NnvYbwMhjLSBxza7qJ0AoelEwqyjVgdCaYAEMmrqykBJ4VRuZpH3DpACOIXB6wwGWQNaw4YT9dOblq21YJJiH0maP1GDxUigzMgdy9VhcTo+/G3ojqbLsGh1jRhisQp95Ma+WK4Gy1T0DLQlDPEv1X2Xr4VYWO8AAAAASUVORK5CYII=);
    
       --background: #121212;
       --foreground: #eee;
       --jumbotron: #222;
       --navbg-border: #212426;
       --sidebar-background: #121212;
       --navbar-background: #121212;
       --navbar-text: #eee;
       --primary: #26aef9;
       --gray: #e1e1e1;
       --table-background: #323232;
       
       --jumbotron-logo-url: var(--dark-jumbotron-logo-url);
       --navbar-logo-url: var(--dark-navbar-logo-url);
    }
  </style><link as="script" rel="preload" href="/webpack-runtime-d2a08c36e55e763cb33f.js"/><link as="script" rel="preload" href="/styles-755093da0c07f4b49226.js"/><link as="script" rel="preload" href="/framework-a445a942d18bd3dc90d1.js"/><link as="script" rel="preload" href="/5e2a4920-cb339010809c6199e89f.js"/><link as="script" rel="preload" href="/app-63b5ea2d1438f50a7cb3.js"/><link as="script" rel="preload" href="/commons-5c54e7659bee3b35d942.js"/><link as="script" rel="preload" href="/component---src-templates-wiki-js-a7e6f6cbb628d5c2716a.js"/><link as="fetch" rel="preload" href="/page-data/wiki/deployment/tuning/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
(function() {
  const themes = JSON.parse('{"dark":{"logos":{"navbar":"var(--dark-navbar-logo-url)","jumbotron":"var(--dark-jumbotron-logo-url)"},"logoVariant":"white","tableBackground":"#323232","titleButton":"white","skipMobileNavbarBorders":false,"colors":{"background":"#121212","foreground":"#eee","jumbotron":"#222","navbgBorder":"#212426","sidebarBackground":"#121212","navbarBg":"#121212","navbarText":"#eee","primary":"#26aef9","gray":"#e1e1e1"}},"light":{"logos":{"navbar":"var(--light-navbar-logo-url)","jumbotron":"var(--light-jumbotron-logo-url)"},"logoVariant":"blue","tableBackground":"#e1e1e1","titleButton":"black","skipMobileNavbarBorders":true,"colors":{"background":"#fff","foreground":"#121212","jumbotron":"#ebebeb","navbgBorder":"#d9dcde","sidebarBackground":"#fff","navbarBg":"#121212","navbarText":"#eee","primary":"#0e5e8a","gray":"#e1e1e1"}}}');

  function setupThemeProperties(theme){const root=document.documentElement;root.style.setProperty('--background',theme.colors.background);root.style.setProperty('--foreground',theme.colors.foreground);root.style.setProperty('--jumbotron',theme.colors.jumbotron);root.style.setProperty('--navbg-border',theme.colors.navbgBorder);root.style.setProperty('--sidebar-background',theme.colors.sidebarBackground);root.style.setProperty('--navbar-background',theme.colors.navbarBg);root.style.setProperty('--navbar-text',theme.colors.navbarText);root.style.setProperty('--primary',theme.colors.primary);root.style.setProperty('--gray',theme.colors.gray);root.style.setProperty('--table-background',theme.tableBackground);root.style.setProperty('--jumbotron-logo-url',`${theme.logos.jumbotron}`);root.style.setProperty('--navbar-logo-url',`${theme.logos.navbar}`);}

  function getInitialColorMode() {
    const persistedColorPreference = window.localStorage.getItem('__velocity_preferred_theme');
    const hasPersistedPreference = typeof persistedColorPreference === 'string';
    if (hasPersistedPreference) {
      return persistedColorPreference;
    }
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    const hasMediaQueryPreference = typeof mql.matches === 'boolean';
    if (hasMediaQueryPreference) {
      return mql.matches ? 'dark' : 'light';
    }
    return 'dark';
  }
  const colorMode = getInitialColorMode();
  const preferredTheme = themes[colorMode];
  
  setupThemeProperties(preferredTheme);
  document.documentElement.style.setProperty('--initial-color-mode', colorMode);
})()</script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1w3x6mq">.css-1w3x6mq{margin:0;padding:0;position:fixed;top:0;width:100%;background-color:var(--navbar-background);color:var(--navbar-text);border-bottom:1px solid;border-color:var(--navbg-border);z-index:100;}.css-1w3x6mq a{-webkit-text-decoration:none;text-decoration:none;}</style><nav class="css-1w3x6mq eqhgp4d0"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-k008qs eqhgp4d1"><style data-emotion-css="1re7fdi">.css-1re7fdi{padding:15px;-webkit-flex:1;-ms-flex:1;flex:1;}</style><div class="css-1re7fdi eqhgp4d2"><style data-emotion-css="rhidqv">.css-rhidqv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--navbar-text) !important;font-weight:bold;}</style><a class="css-rhidqv" href="/"><style data-emotion-css="x5izx1">.css-x5izx1{width:68.5px;height:30px;background-image:var(--navbar-logo-url);background-size:cover;margin-right:.3rem;}</style><div class="css-x5izx1 eqhgp4d3"></div><span>Velocity</span></a></div><style data-emotion-css="1j6uhox">.css-1j6uhox{padding:18px 10px 0 10px;}@media (min-width:640px){.css-1j6uhox{display:none;}}</style><div class="css-1j6uhox eqhgp4d7"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="16px" width="16px" xmlns="http://www.w3.org/2000/svg"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div><style data-emotion-css="1jw3q8c">.css-1jw3q8c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (max-width:640px){.css-1jw3q8c{display:none;}}</style><div class="css-1jw3q8c eqhgp4d5"><style data-emotion-css="t2ftxu">.css-t2ftxu{padding:18px 10px;background-color:rgba(14,111,212,1);background-repeat:no-repeat;-webkit-transition:background-color .25s 0s;transition:background-color .25s 0s;color:var(--navbar-text) !important;display:block;}.css-t2ftxu:hover{background-color:rgba(14,111,212,1);}@media (max-width:640px){.css-t2ftxu{padding:8px;border-bottom:1px solid var(--navbg-border);}}</style><a class="css-t2ftxu eqhgp4d8" href="/wiki">Documentation</a><style data-emotion-css="1bznlgv">.css-1bznlgv{padding:18px 10px;background-color:rgba(14,111,212,0);background-repeat:no-repeat;-webkit-transition:background-color .25s 0s;transition:background-color .25s 0s;color:var(--navbar-text) !important;display:block;}.css-1bznlgv:hover{background-color:rgba(14,111,212,1);}@media (max-width:640px){.css-1bznlgv{padding:8px;border-bottom:1px solid var(--navbg-border);}}</style><a class="css-1bznlgv eqhgp4d8" href="/downloads">Downloads</a><a href="https://forums.velocitypowered.com" class="css-1bznlgv eqhgp4d4">Forums</a><a href="https://discord.gg/8cB9Bgf" class="css-1bznlgv eqhgp4d4">Discord</a><a href="https://github.com/VelocityPowered/Velocity" class="css-1bznlgv eqhgp4d4">GitHub</a><style data-emotion-css="4cso8m">.css-4cso8m{padding:15px 10px;}</style><div class="css-4cso8m"></div></div></div><style data-emotion-css="q5zivt">.css-q5zivt{display:none;background-color:var(--navbar-background);}@media (max-width:640px){.css-q5zivt{margin-bottom:-60px;display:none;}}</style><div class="css-q5zivt eqhgp4d6"><a class="css-t2ftxu eqhgp4d8" href="/wiki">Documentation</a><a class="css-1bznlgv eqhgp4d8" href="/downloads">Downloads</a><a href="https://forums.velocitypowered.com" class="css-1bznlgv eqhgp4d4">Forums</a><a href="https://discord.gg/8cB9Bgf" class="css-1bznlgv eqhgp4d4">Discord</a><a href="https://github.com/VelocityPowered/Velocity" class="css-1bznlgv eqhgp4d4">GitHub</a></div></nav><style data-emotion-css="1msbwa1">.css-1msbwa1{margin-top:60px;}@media (min-width:640px){.css-1msbwa1{margin-bottom:60px 0;}}</style><main class="css-1msbwa1 e1xfnwwh0"><style data-emotion-css="1o14t04">.css-1o14t04{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:auto;}@media (max-width:768px){.css-1o14t04{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;}}@media (min-width:640px){.css-1o14t04{margin-bottom:60px;}}</style><div class="css-1o14t04 em2qb6j0"><style data-emotion-css="flp0up">.css-flp0up{margin:.5rem 0 0 0;}@media (min-width:768px){.css-flp0up{position:fixed;bottom:0;top:53px;height:calc(100vh - 7rem);width:12rem;background:var(--sidebar-background);border-right:1px solid;border-color:var(--navbg-border);overflow-y:auto;padding-top:.5rem;}}@media (min-width:1024px){.css-flp0up{width:18rem;margin:.5rem 0 0 0;}}</style><nav class="css-flp0up e1f3copk0"><div><style data-emotion-css="1l6khdp">.css-1l6khdp{text-transform:uppercase;font-weight:300;font-size:1rem;padding:.5rem 0 .5rem 1.5rem;}</style><div class="css-1l6khdp e1f3copk1">Velocity User&#x27;s Guide</div><style data-emotion-css="1rq0t9t">.css-1rq0t9t{list-style-type:none;padding:0;margin:0.1rem 0;}.css-1rq0t9t:first-of-type{margin-top:0;}</style><ul class="css-1rq0t9t e1f3copk3"><li><style data-emotion-css="1ihlabh">.css-1ihlabh{color:var(--foreground) !important;-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-1ihlabh e1f3copk4" href="/wiki/users/getting-started/"><style data-emotion-css="1xspem">.css-1xspem{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;font-size:.9rem;padding:.5rem 0 .5rem 1.5rem;}.css-1xspem:before{content:"";left:calc(0.5rem);height:8px;position:absolute;-webkit-transition:all 250ms cubic-bezier(0.4,0,0.2,1) 0s;transition:all 250ms cubic-bezier(0.4,0,0.2,1) 0s;width:8px;border-radius:10px;background-color:none;}.css-1xspem:hover{background-color:rgba(2,136,209,0.2);}</style><span class="css-1xspem e1f3copk2">Getting Started</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/users/migration/"><span class="css-1xspem e1f3copk2">Migration Guide</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/users/built-in-commands/"><span class="css-1xspem e1f3copk2">Built-In Commands</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/users/configuration/"><span class="css-1xspem e1f3copk2">Configuring Velocity</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/users/server-compatibility/"><span class="css-1xspem e1f3copk2">Server Compatibility</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/users/forwarding/"><span class="css-1xspem e1f3copk2">Player Information Forwarding</span></a></li></ul></div><div><div class="css-1l6khdp e1f3copk1">Fast Facts</div><ul class="css-1rq0t9t e1f3copk3"><li><a class="css-1ihlabh e1f3copk4" href="/wiki/users/faq/"><span class="css-1xspem e1f3copk2">Frequently Asked Questions</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/users/what-does-velocity-do-for-me/"><span class="css-1xspem e1f3copk2">What Does Velocity Do For Me?</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/users/comparisons-to-other-proxies/"><span class="css-1xspem e1f3copk2">Comparing to the Competition</span></a></li></ul></div><div><div class="css-1l6khdp e1f3copk1">Deployment Guide</div><ul class="css-1rq0t9t e1f3copk3"><li><a class="css-1ihlabh e1f3copk4" href="/wiki/deployment/security/"><span class="css-1xspem e1f3copk2">Securing Your Servers</span></a></li><li><a aria-current="page" class="css-1ihlabh e1f3copk4" href="/wiki/deployment/tuning/"><style data-emotion-css="ur6rv4">.css-ur6rv4{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;font-size:.9rem;padding:.5rem 0 .5rem 1.5rem;}.css-ur6rv4:before{content:"";left:calc(0.5rem);height:8px;position:absolute;-webkit-transition:all 250ms cubic-bezier(0.4,0,0.2,1) 0s;transition:all 250ms cubic-bezier(0.4,0,0.2,1) 0s;width:8px;border-radius:10px;background-color:var(--primary);}.css-ur6rv4:hover{background-color:rgba(2,136,209,0.2);}</style><span class="css-ur6rv4 e1f3copk2">Tuning Velocity</span></a></li></ul></div><div><div class="css-1l6khdp e1f3copk1">Developer Guide</div><ul class="css-1rq0t9t e1f3copk3"><li><a class="css-1ihlabh e1f3copk4" href="/wiki/developers/creating-your-first-plugin/"><span class="css-1xspem e1f3copk2">Creating Your First Plugin</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/developers/api-basics/"><span class="css-1xspem e1f3copk2">API Basics</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/developers/event-api/"><span class="css-1xspem e1f3copk2">The Event API</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/developers/command-api/"><span class="css-1xspem e1f3copk2">The Command API</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/developers/dependencies/"><span class="css-1xspem e1f3copk2">Plugin Dependencies</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/developers/task-scheduling/"><span class="css-1xspem e1f3copk2">Task Scheduling</span></a></li><li><a class="css-1ihlabh e1f3copk4" href="/wiki/developers/pitfalls/"><span class="css-1xspem e1f3copk2">Common Pitfalls</span></a></li></ul></div></nav><style data-emotion-css="4f6afz">.css-4f6afz{margin:0 1rem;width:auto;}@media (min-width:768px){.css-4f6afz{margin-left:15rem;margin-right:1rem;width:calc(100vw - 18rem);}}@media (min-width:1024px){.css-4f6afz{margin-left:20rem;width:calc(100vw - 22rem);}}</style><main class="css-4f6afz em2qb6j1"><style data-emotion-css="1esk8yb">.css-1esk8yb{max-width:40rem;margin:0 auto;}@media (min-width:1024px){.css-1esk8yb{max-width:60rem;}}</style><section class="css-1esk8yb em2qb6j2"><h1>Tuning Velocity</h1><p>Velocity comes with good performance out of the box. We go in deep, starting from smart algorithmic choices, making strategic usage of native libraries, all the way to the JVM level, optimizing the proxy so that the JVM will make better decisions when optimizing the code.</p><h2>Host the proxy on Linux</h2><p>Velocity comes with high-performance, specially tuned native libraries for compression and encryption, along with including native transports from Netty. However, due to support constraints, the compiled natives are only verified to work on Linux x86_64 and aarch64. While Velocity does not require the natives to work, you will suffer from degraded performance. For this reason, we strongly recommend that all production deployments of Velocity run on x86-64 Linux.</p><h2>Allocate server resources appropriately</h2><p>You should always make sure to allocate the correct amount of heap, network bandwidth, and get the right CPU for the amount of players you want to have on your proxy at a given time. For instance, it is unlikely you&#x27;ll be able to get 1,000 players on a Raspberry Pi Zero, but you&#x27;ll have a much better chance if you have a recent high-end server CPU from Intel or AMD.</p><p>There is no &quot;one-size-fits-all&quot; hardware recommendation, only general guidelines for the amount of players you can expect:</p><ul><li>Prefer lots of cores but lower clock speeds. Unlike the Minecraft server, Velocity can actually benefit from the extra cores and single-threaded performance is not as important.</li><li>You should have always have enough memory to run Velocity, including room for JVM overhead and for your operating system. For a rough minimum recommended memory amount, double the size of the proxy heap and then add 2GB. For instance, for a proxy with a 2GB heap, plan on getting at least 6GB of memory.</li><li>Disk speed is unimportant. A solid-state drive is nice to have but not strictly required. Likewise, disk capacity is unimportant as well.</li></ul><h3>Special notes regarding speculative execution security vulnerabilities</h3><p>Starting in 2018, a number of security vulnerabilities with regard to <a href="https://en.wikipedia.org/wiki/Speculative_execution">speculative execution</a> used by modern CPUs have been discovered.</p><p>The mitigations to these vulnerabilities can have painful performance implications, especially on processors vulnerable to Meltdown and further compounded if running in a virtual machine. Velocity, as a network application, is particularly sensitive to the performance hits that the mitigations introduce.</p><p>To minimize these hits, we recommend hosting your proxy on a machine with a CPU that has mitigations against Spectre and Meltdown. Processors released in 2019 and onwards typically contain mitigations to protect against Spectre and Meltdown.</p><p>If you are using a CPU vulnerable to Spectre and/or Meltdown and are willing to risk security for performance, it is also possible to disable Spectre/Meltdown mitigations depending on the operating system you use. Note however that you disable these security mitigations <em>at your own risk</em>. The Velocity project does not recommend that you disable these mitigations.</p><h2>Allocate enough heap</h2><p>Alongside having enough CPU, memory, and network bandwidth, you must also allocate enough Java heap to the proxy. Not doing this can induce lag and in severe cases may result in the proxy being terminated by the Java Virtual Machine because it ran out of memory.</p><p>The general rule of thumb is that you allocate 512MB per 500 players, plus some extra to allow for some room for error (typically 1GB extra). For instance, if you want to handle 1,000 on a single proxy, plan to allocate 2GB of heap.</p><h3>Special notes for containers</h3><p><strong>If you use a containerized setup (such as using Kubernetes, Pterodactyl, or Docker directly), you should not allocate the entirety of your memory allocation to the heap!</strong> Doing so <em>will</em> likely cause the proxy to be killed by the kernel&#x27;s out-of-memory killer, which will result in your proxy going down, likely at the worst possible time.</p><p>A safe (albeit conservative) setting for the heap would be to allocate half of the memory you allocate to the proxy container in total. For instance, if you know the proxy will need to hold 1,000 players, then allocate 4GB to the container and give the proxy 2GB of heap.</p><h2>Tune your startup flags</h2><p>We also recommend tuning your startup flags. The current recommendation is:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">-XX:+UseG1GC -XX:G1HeapRegionSize=4M -XX:+UnlockExperimentalVMOptions -XX:+ParallelRefProcEnabled -XX:+AlwaysPreTouch -XX:MaxInlineLevel=15</code></pre></div><p>You will add these flags after the <code class="language-text">java</code> command but before the <code class="language-text">-jar</code> parameter.</p><h3>Explanation of the flags</h3><p>Most of these flags focus on tuning the G1 garbage collector to be more friendly to Velocity&#x27;s
workload. One of these flags (<code class="language-text">-XX:MaxInlineLevel=15</code>) tends to improve performance in general.</p><p>Before the release of Java 9, the default Java garbage collector was the Parallel GC. This
is a stop-the-world collector that does its work in parallel. The problem is that its pause
times tend to be long, and are not suitable for Minecraft (often showing up as seemingly
unexplainable lag spikes).</p><p>The recommended garbage collector for Velocity is the G1 region-based collector. There are
several reasons for us to recommend G1:</p><ul><li>It strikes the right balance between throughput and pause times. Throughput is roughly how much work the
proxy can achieve.</li><li>It is compatible with most setups (it is available in Java 8, the earliest Java version we support).</li></ul><p>Setups using these flags tend have very low (less than 10 millisecond) GC pauses every few minutes, which is
very good for Minecraft.</p><h3>Other configurations</h3><style data-emotion-css="1j70aj0">.css-1j70aj0{background-color:#9a0007;color:white;padding:1rem;}.css-1j70aj0 a{color:#26aef9;}</style><div class="css-1j70aj0 e1ggvu750"><strong>Caution!</strong> <!-- -->You run these configurations solely at your own risk.</div><p>Java 11 and Java 12 brought two new garbage collectors for HotSpot: ZGC (Java 11) and Shenandoah (Java 12). Both have
been declared stable in Java 15.</p><p>Velocity is an application that tends to follow the generational hypothesis quite closely. It has also been tuned to
reduce load on the garbage collector as much as possible. Both ZGC and Shenandoah should work well with Velocity, although
ZGC did not have important features needed for production use until Jave 14 and versions of Shenandoah for older
LTS versions of Java are only available from Red Hat (such as in CentOS and Fedora).</p></section></main></div></main><style data-emotion-css="1xxr0ty">@media (min-width:640px){.css-1xxr0ty{position:fixed;bottom:0;background:var(--sidebar-background);border-top:1px solid;border-color:var(--navbg-border);font-size:.8rem;width:100%;}}</style><footer class="css-1xxr0ty e1qs4nzh0"><style data-emotion-css="q5fqw0">.css-q5fqw0{padding:1rem;}</style><div class="css-q5fqw0 e1qs4nzh1">Copyright © 2018-2020 Velocity Contributors. This wouldn&#x27;t be possible without our <a href="/sponsors">generous sponsors</a>.</div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/wiki/deployment/tuning/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-eba0c76d2306949edcce.js"],"app":["/app-63b5ea2d1438f50a7cb3.js"],"component---src-pages-downloads-js":["/component---src-pages-downloads-js-e7ef65016eeeb2117ab5.js"],"component---src-pages-index-js":["/component---src-pages-index-js-538d41ecffeefd2effc8.js"],"component---src-pages-sponsors-js":["/component---src-pages-sponsors-js-0e0b80beec1d9e1dd79f.js"],"component---src-templates-wiki-js":["/component---src-templates-wiki-js-a7e6f6cbb628d5c2716a.js"]};/*]]>*/</script><script src="/polyfill-eba0c76d2306949edcce.js" nomodule=""></script><script src="/component---src-templates-wiki-js-a7e6f6cbb628d5c2716a.js" async=""></script><script src="/commons-5c54e7659bee3b35d942.js" async=""></script><script src="/app-63b5ea2d1438f50a7cb3.js" async=""></script><script src="/5e2a4920-cb339010809c6199e89f.js" async=""></script><script src="/framework-a445a942d18bd3dc90d1.js" async=""></script><script src="/styles-755093da0c07f4b49226.js" async=""></script><script src="/webpack-runtime-d2a08c36e55e763cb33f.js" async=""></script></body></html>