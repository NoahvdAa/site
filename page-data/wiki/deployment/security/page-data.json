{"componentChunkName":"component---src-templates-wiki-js","path":"/wiki/deployment/security/","result":{"data":{"mdx":{"body":"const _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nconst _frontmatter = {\n  \"title\": \"Securing Your Servers\"\n};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return mdx(\"div\", props);\n};\n\nconst Caution = makeShortcode(\"Caution\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  let {\n    components\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, `It is vital that you secure your backend servers. As part of setting up Velocity, you will put your server into offline mode, which means in theory, someone could impersonate any player on your server. This is extremely dangerous, so it is important to make sure only the proxy can connect to your servers.`), mdx(\"p\", null, `This guide will explore the various options for securing your backend servers so only your proxy can connect to them. Note that this is an `, mdx(\"em\", {\n    parentName: \"p\"\n  }, `exploration`), ` of options, aiming to review the various options and give you advantages and disadvantages to them so you can make an informed decision.`), mdx(\"p\", null, `This list is not in any particular order, and almost all of these methods can be combined as needed.`), mdx(\"h2\", null, `Operating System Firewalls`), mdx(\"p\", null, `When properly configured, using the firewall facilities provided by your server's operating system is a highly effective way to protect your servers. The Velocity project `, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `strongly recommends the use of a firewall`), `.`), mdx(\"p\", null, `Instructions for your operating system may vary. Solutions for major server OSes include:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Windows: Windows Firewall`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Linux: iptables, nftables`)), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Advantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Fool-proof if you do not give untrusted servers access to your servers`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Does not require any extra Minecraft server configuration`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Part of good system hardening advice for any operating system`)), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Disadvantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Tricky first-time setup`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `May be difficult to use with multiple proxies`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Firewall configuration must be kept in sync with new servers and proxies`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Not viable on a shared host`)), mdx(\"h2\", null, `Velocity Modern Forwarding`), mdx(\"p\", null, `If your server only supports Minecraft 1.13 and above, Velocity's modern forwarding can forward player information to your servers and provide a second layer of protection against someone trying to impersonate as your proxy.`), mdx(Caution, {\n    mdxType: \"Caution\"\n  }, \"Velocity modern forwarding is not a replacement for a firewall. We strongly recommend using a firewall with any Minecraft proxy setup.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Advantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Get player info forwarding for free`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Secure on a shared host, provided the host has implemented proper protections`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Works if you host your server on multiple physical servers`)), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Disadvantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Only works for Minecraft 1.13 and above`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Requires Paper 1.13 or above, or FabricProxy-Lite if you use Fabric`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Relies on the forwarding secret being kept secret`)), mdx(\"h2\", null, `Binding To `, mdx(\"code\", {\n    parentName: \"h2\",\n    \"className\": \"language-text\"\n  }, `localhost`)), mdx(\"p\", null, `If you are hosting your proxy on the same physical computer as your other servers (and nobody else is hosting servers on them), binding your servers to `, mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, `localhost`), ` is a very simple way of protecting them from getting connected to by anything other than the proxy.`), mdx(\"p\", null, `For each server, open the `, mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, `server.properties`), ` file. Find the line that starts with `, mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, `server-ip`), ` and change the line to `, mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, `server-ip=127.0.0.1`), `. Save the file and restart the server.`), mdx(\"p\", null, `Afterwards, open your `, mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, `velocity.toml`), ` file and ensure all the servers are pointing to `, mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, `127.0.0.1:<port>`), `.`), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Advantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Trivial setup compared to other methods discussed`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Fool-proof if you do not give untrusted users access to your server`)), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Disadvantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Setup must be reversed (and an alternate method used) if you move any of the servers to a different physical server (such that the proxy and the server are not on the same physical server)`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Not viable on a shared host`)), mdx(\"h2\", null, `Using an Encrypted Tunnel`), mdx(\"p\", null, `This is a variation on \"Binding To `, mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, `localhost`), `\", but instead of hosting all your servers on a single physical server, you will set up an encrypted tunnel between each of your servers, and make sure the server only listens for incoming connections from the tunnel. There are many different solutions, ranging from VPN solutions such as `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.wireguard.com\"\n  }, `WireGuard`), `, `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://openvpn.net/\"\n  }, `OpenVPN`), `, and `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.tinc-vpn.org/\"\n  }, `tinc`), ` to encrypted tunnels such as `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.tarsnap.com/spiped.html\"\n  }, `spiped`), `. This guide will not go into details of how to set up each of these solutions.`), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Advantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Encrypts traffic between your proxy and your servers while ensuring only authorized clients can connect to your servers`)), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Disadvantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Very complex setup`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Impossible to use on a shared host`)), mdx(\"h2\", null, `IP Whitelisting Plugins`), mdx(\"p\", null, `As a last line of defense, you can choose to restrict logins to users on an IP whitelist using a plugin like `, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.spigotmc.org/resources/ipwhitelist.61/\"\n  }, `IPWhitelist`), `.`), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Advantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `May be your only solution if none of the other solutions will work (especially on a shared host)`)), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, `Disadvantages`), `:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Vulnerable to attack if the attacker can get a server on the same node as your proxy is on`)), mdx(\"h2\", null, `Other Important Security Advice`), mdx(\"p\", null, `This common-sense general advice goes without saying:`), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Keep frequent backups of your server`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Set up a firewall on your server`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Run your servers as an unprivileged user (this means no `, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, `sudo`), ` access or running as\n`, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, `root`), ` for Linux users!)`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Update Velocity, your Minecraft server and server plugins, and your server's operating\nsystem frequently`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Use strong passwords`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Carefully think about the potential impacts of installing any plugins or software\nbefore actually doing so`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Secure any and all other services you may be running on your server`), mdx(\"li\", {\n    parentName: \"ul\"\n  }, `Follow all system hardening advice for your operating system`)), mdx(\"p\", null, `We will not provide a full treatment to the advice given above, so please do some research\nof your own. Your setup will vary - there is no \"one size fits all\" advice we can give\nother than these general guidelines.`));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Securing Your Servers"},"excerpt":"It is vital that you secure your backend servers. As part of setting up Velocity, you will put your server into offline mode, which means in…"}},"pageContext":{"slug":"/deployment/security/"}},"staticQueryHashes":["63159454"]}